---
_schema: default
_uuid: dafe4618-7097-42a8-a8b0-f84e4be81131
_created_at: 2024-08-28T16:21:57+12:00
title: Migration Checklist
nav_title: Migration Checklist
order: 3
published: true
image: >-
  https://cc-dam.imgix.net/documentation/images/default-thumbnail/2023-Q4/CloudCannon-Documentation-Thumbnail.png
description: >-
  Learn how to migrate your existing Site to CloudCannon's Unified Configuration
  file format.
tags: []
related_articles:
related_links: []
explicit_canonical:
---
<comp.Notice info_type="info">
  Migrating your existing Site is optional. You can use CloudCannon's [live configuration and data editing feature](/documentation/guides/unified-configuration-migration-guide/live-configuration-and-data-editing/) without migrating your Site.
</comp.Notice>

## Migration preparation

We recommend creating a new branch of your Site for this migration to avoid misconfiguration affecting your live Site.

To enable Unified Configuration:

1. Navigate to the *Flags* page under *Site Settings*.
2. Check the *Step 2: Use Unified Configuration* flag under *Upgrade to Unified Configuration*.
3. Click the *Update* button.

CloudCannon now expects your Site to use the Unified Configuration file format.

<comp.DocsImage path="https://cc-dam.imgix.net/documentation/images/editing/flags-and-legacy/2024-09/CloudCannon-Documentation-Site-Settings-Flags-Unified-Configuration.png" alt="A screenshot of the Flags page shows a checkbox named Use Unified Configuration under the Unified Configuration heading." title="The Flags page" type="screenshot"/>

<comp.Notice info_type="info">
  Checking the *Use Unified Configuration* flag will automatically enable the *Enable live configuration and data reloading* flag.
</comp.Notice>

In the short term, depending on how closely your Site configuration matches the Unified Configuration format, your Site may become misconfigured in CloudCannon. Misconfiguration could look like incorrect collection appearance or nonfunctional data sets in Select and Multiselect inputs. You will resolve this temporary state once you complete this migration guide.

One source of misconfiguration is opening your CloudCannon configuration file in the configuration GUI. As CloudCannon expects your configuration file to be in the Unified Configuration format, opening the file in the configuration GUI will strip content from your file (e.g., defunct keys). We highly recommend completing your migration in CloudCannon's Source Editor or your local development environment without using the configuration GUI.

## Global configuration

### CloudCannon configuration file type

Your CloudCannon configuration file must be a YAML (recommended) or JSON file rather than JavaScript.

### Explicitly configure source

<comp.Notice info_type="info">
  This step of the migration guide is only relevant to Sites using Eleventy, Hugo, or Jekyll as their SSG.
</comp.Notice>

CloudCannon no longer detects your source folder at build time. Ensure the `source` key is configured in your CloudCannon configuration file, especially if your Site files are in a subfolder within your repository.

## Collection configuration

### Explicitly configure a path for every collection

CloudCannon no longer detects collections during your build step.

Previously, CloudCannon could infer the path for each collection during the Site build step (e.g., Jekyll Sites automatically assume your posts collection is in the `_posts` folder). Additionally, some build integrations could discover collections at build time (e.g., posts, page, and drafts on Jekyll Sites). CloudCannon no longer uses this behavior.

Please ensure that each collection in `collections_config` has the `path` key defined. The below code shows how to configure a path explicitly:

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

collections_config:
  blog:
    path: content/blog

``````````
</comp.MultiCodeBlock>

### Replace parse\_branch\_index with a glob

<comp.Notice info_type="info">
  This step of the migration guide is only relevant to Sites using Hugo as their SSG.
</comp.Notice>

CloudCannon no longer uses `parse_branch_index: true` to add index files from one collection to a pages collection. Instead, you can define a file glob to exclude your index files from their initial collection.

By default, Hugo sites will have a pages collection defined with a path of `content`. Pages excluded from any collections that are subdirectories will be assigned to this pages collection.

CloudCannon now uses files globs to determine which files belong to a collection and are visible in the collection browser. You can add a negative glob to the `collections_config.*.glob` key by prefixing your file name with the `!` character.

The below code shows how to configure the `glob` key to exclude the `_index.md` file for your collection:

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

collections_config:
  blog:
    path: content/blog
    glob:
      - '!_index.md'

``````````
</comp.MultiCodeBlock>

The above example ensures that all files within the blog folder are included in the blog collection, with the exception of `_index.md`.

### Replace collection filters with globs

CloudCannon no longer uses the `collections_config.*.filter` key to filter which files to show in a collection browser, including the nested keys `base`, `include`, and `exclude`. All collections now show only collection-like files that explicitly belong to a collection, as per the old `filter.base: strict` configuration (i.e., will not show collection-like files from a different collection that are stored at the same collection path).

CloudCannon now uses file globs to determine which files belong to a collection and are visible in the collection browser. A file glob is a pattern used to identify matching files. The `collections_config.*.glob` key is an Array. Each entry in the array is a pattern that controls which files are visible in CloudCannon's collection browser. The glob pattern is relative to your collection path and can include negative values by adding the `!` character as a prefix.

The below code shows how to configure the `glob` key for your collection:

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

collections_config:
  blog:
    path: content/blog
    glob:
      - '!*.yml'

``````````
</comp.MultiCodeBlock>

The above example ensures that all YAML files within the blog folder are not included in the blog collection.

### Explicitly configure your data collection

<comp.Notice info_type="info">
  This step of the migration guide is only relevant to Sites using Eleventy, Hugo, or Jekyll as their SSG.
</comp.Notice>

CloudCannon no longer uses build integrations to set the following keys in `collections_config.data`:

1. `disable_url`
2. `disable_file_actions`
3. `disable_add_folder`
4. `disable_add`

You must explicitly set these keys.

### Configure collection groups

CloudCannon no longer groups collections in your *Site Navigation* by default. If you want to retain your original grouping, add the `collection_groups` key to your CloudCannon configuration file.

The below code shows how to configure the `collection_groups` key:

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

collection_groups:
 - heading: Pages
   collections___1___:
     - pages
     # other output collections here
 - heading: Blogging
   collections:
     - posts
     - drafts
 - heading: Data
   collections___2___:
     - data
     # other non-output collections here

``````````
<comp.Annotation number="1">
  Add output collections here.
</comp.Annotation><comp.Annotation number="2">
  Add non-output collections here.
</comp.Annotation>
</comp.MultiCodeBlock>

### Defunct configuration options

CloudCannon no longer uses some configuration options in the Unified Configuration file format. Although leaving these keys in your Site files will not harm your Site, they also will not function. If you want to maintain a clean configuration file, we recommend removing defunct configuration options.

We recommend updating the following keys to their new counterparts:

1. `collections_config.*.singular_key`

Please use `_inputs.*.options.values` rather than relying on naming conventions.

2. `collections_config.*.output`

Collections now default to being output if CloudCannon can determine an output URL. If you need to configure `output: false`, please use the `collections_config.*.disable_url` key set to `true`.

We recommend deleting the following keys:

1. `collections_config.*.parser`
2. `collections_config_override`
3. `paths.data`
4. `paths.collections`
5. `paths.layouts`
6. `paths.includes`

## Data configuration

### Update the format of your data sets

<comp.Notice info_type="info">
  This step of the migration guide is only relevant to Sites using Eleventy, Hugo, or Jekyll as their SSG.
</comp.Notice>

CloudCannon no longer exclusively reads data sets at build time. You must update your data configuration to allow CloudCannon to read your data sets at any time.

CloudCannon no longer uses the following data configurations:

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

data_config: true

``````````
</comp.MultiCodeBlock>

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

data_config:
  locations: true

``````````
</comp.MultiCodeBlock>

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

data_config:
  locations:
    path: data/locations.yml
    parser___1___: yaml

``````````
<comp.Annotation number="1">
  The key `data_config.*.parser` is now defunct.
</comp.Annotation>
</comp.MultiCodeBlock>

Please update `data_config` to:

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

data_config:
  locations:
    path: data/locations.yml

``````````
</comp.MultiCodeBlock>

### Defunct configuration options

CloudCannon no longer uses some configuration options in the Unified Configuration file format. Although leaving these keys in your Site files will not harm your Site, they also will not function. If you want to maintain a clean configuration file, we recommend removing defunct configuration options.

We recommend deleting the following keys:

1. `data_config.*.parser`

## Input configuration

### Define the values for Select input value\_key

Before Unified Configuration, CloudCannon could use build data to populate the <a href="/documentation/articles/select-and-multiselect-inputs/#options" target="_blank" rel="noopener">Select and Multiselect input</a> option `value_key` values. As a successful build is no longer required to edit your files, you must define all values for the `value_key` option in the configuration cascade rather than use values generated by a build integration.

For example, `value_key: path` and `value_key: url` will continue to work, however Hugo's `value_key: content_path` and Jekyll's `value_key: id` will not work as CloudCannon generates these values during build time and Unified Configuration Sites no longer use information from build integrations.

### Configure \_inputs for Jekyll tags and collections

<comp.Notice info_type="info">
  This step of the migration guide is only relevant to Sites using Jekyll as their SSG.
</comp.Notice>

CloudCannon no longer uses naming conventions and build integrations to create inputs for tags and collections.

The below code shows how to configure the categories and tags inputs:

<comp.MultiCodeBlock language="YAML" translate_into={["json"]} source="cloudcannon.config.yml">
``````````

_inputs:
     categories:
       type: multiselect
       options:
         values: collections.posts[*].categories
         allow_create: true
     tags:
       type: multiselect
       options:
         values: collections.posts[*].tags
         allow_create: true

``````````
</comp.MultiCodeBlock>

## Other configuration

### Explicitly configure attributes for file content Editable Regions

CloudCannon no longer automatically applies Editable Regions to file content without an explicit attribute. Previously, CloudCannon would attempt to discover these regions automatically when it encountered a content variable as the only child of an element, for example:

<comp.CodeBlock language="HTML" source="layout.html">
``````````
<div>{{ content }}</div>
``````````
</comp.CodeBlock>

This markup detection was fragile in certain circumstances, and couldn't be explicitly toggled on or off.

For sites using Unified Configuration, CloudCannon will no longer discover these regions automatically. Instead, an explicit attribute now exists to add an Editable Region for the content of a file.

The below code shows how to configure the `data-cms-edit="content"` attribute to configure Editable Regions for your content:

<comp.CodeBlock language="HTML" source="layout.html">
``````````
<div data-cms-edit="content">{{ content }}</div>
``````````
</comp.CodeBlock>

###

###