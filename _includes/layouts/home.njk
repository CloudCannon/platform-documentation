<!DOCTYPE html>
<html lang="en" x-data="{ contentBlocks: [] }" x-init="
  new CloudCannonLive(data => {
    contentBlocks = data?.content_blocks || []
  })
">
<head>
  <meta charset="UTF-8" />
  <title>{{ title }}</title>
    <script src="https://unpkg.com/alpinejs" defer></script>
    <script src="{{ '/assets/js/site.js' }}" type="text/javascript"></script>
    <script src="{{ '/assets/js/custom-live.js' }}" type="text/javascript"></script>
</head>
<body>

  <!-- Optional: static rendering for non-CloudCannon environments -->
  <div class="static-content">
    {% for block in content_blocks %}
      <div x-data='{ block: {{ block | dump | safe }} }'>
        {% comp "contentblocks.centredblock" %}{% endcomp %}
      </div>
    {% endfor %}
  </div>

  <!-- CloudCannon live preview region (hidden if not in live editing) -->
  <div id="live-preview" x-show="contentBlocks.length > 0">
    <template x-for="(block, i) in contentBlocks" :key="i">
      <div class="block">
        <template x-if="block._component_type === 'centred'">
          {% comp "contentblocks.centredblock" %}{% endcomp %}
        </template>

        <template x-if="block._component_type === 'card'">
          <div>CARD</div>
        </template>
      </div>
    </template>
  </div>

</body>
</html>
