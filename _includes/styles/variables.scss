:root {
  color-scheme: light dark;

  --color-space: #354361;
  --color-neptune: #034ad8;
  --color-neptune-100: #E6EDFB;
  --color-neptune-double: #0015b7;
  --color-comet: #8bb4ed;
  --color-luna: #f0f5ff;
  --color-carbon: #212121;
  --color-nimbus: #757575;
  --color-alto: #cfcfcf;
  --color-stratus: #eee;
  --color-cloud: #fff;
  --color-emerald: #38a413;
  --color-ruby: #f03a47;
  --color-amethyst: #c703d8;
  --color-amber: #fc6d26;
  --color-sol: #f7e064;
  --color-sol-light: #fffbe4;
  --color-emerald-10: #ebf6e7;
  --color-ruby-10: #ffe7ea;
  --color-amethyst-10: #fae6fc;
  --color-amber-10: #ffede5;

  --color-purple-200: #f4cdf7;
  --color-purple-400: #e99aef;
  --color-purple-600: #dd68e8;
  --color-purple: #c703d8;

  --border-width: 2px;
  --border-radius: 8px;
  --border-radius-small: calc(var(--border-radius) / 2);
  --border-radius-inner: calc(var(--border-radius) - var(--border-width));
  --border-width-negative: calc(var(--border-width) * -1);

  --box-shadow-paper: 0 0 40px rgba(51, 51, 51, 0.1);

  --grid-size: 4px;
  --gap: calc(var(--grid-size) * 5);
  --gap-negative: calc(var(--gap) * -1);
  --gap-double: calc(var(--gap) * 2);
  --gap-half: calc(var(--gap) * 0.5);
  --gap-quarter: calc(var(--gap) * 0.25);

  --font-weight-normal: 300;
  --font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  --font-family-monospace: ui-monospace, 'SFMono-Regular', 'SF Mono', 'Menlo', 'Consolas', 'Liberation Mono', monospace;

  /* THEME VARIABLES - using light-dark() for automatic theme switching */
  --background: light-dark(var(--color-cloud), #2c2c2c);
  --background-nav: light-dark(#fefefe, #171717);
  --background-footer: light-dark(#ececec, #171717);

  --text: light-dark(var(--color-carbon), var(--color-cloud));
  --text-secondary: light-dark(#888888, #b0b0b0);

  --changelog-date: light-dark(#616161, var(--color-cloud));
  --changelog-content: light-dark(#888888, var(--color-cloud));

  --selected-blue: light-dark(var(--color-neptune), #6892E8);

  /* Link colors - AAA compliant (7:1+ contrast ratio) */
  --link: light-dark(#0041a8, #6892E8);
  --link-hover: light-dark(#002970, #b5d4ff);

  --card-background: light-dark(#fafafa, #212121);
  --card-paragraph: light-dark(var(--text), #ececec);

  --arrow-color: light-dark(#888, #fff);

  --nav-shadow: 0px 4px 12px 0px light-dark(
    rgba(0, 0, 0, 0.1),
    rgba(0, 0, 0, 0.3)
  );
  --side-nav-shadow: inset -40px 0 40px -40px light-dark(
    rgba(0, 0, 0, 0.1),
    rgba(0, 0, 0, 0.2)
  );

  --button-border: light-dark(#ececec, #444);
  --button-hover: light-dark(var(--color-luna), #333);

  --accent-background: light-dark(var(--color-neptune-100), rgba(104, 146, 232, 0.2));

  /* Component-specific theme variables */
  --emblem-fill: light-dark(var(--color-neptune), white);
  --nav-hover-text: light-dark(var(--color-carbon), var(--color-cloud));

  --search-icon-fill: light-dark(var(--color-neptune), #cddbf7);
  --toggle-focus: light-dark(var(--color-neptune), #cddbf7);

  --toggle-inactive-fill: light-dark(#b0b0b0, #888);
  --toggle-active-bg: light-dark(#cddbf7, rgba(205, 219, 247, 0.2));
  --toggle-active-fill: light-dark(var(--color-neptune), #cddbf7);

  --glossary-hover: light-dark(
    var(--color-purple-600),
    var(--color-purple-400)
  );

  --centred-block-background: light-dark(var(--color-luna), #354361);
  --centred-block-text: light-dark(var(--color-space), var(--color-cloud));

  /* Tabs - theme-aware colors */
  --tabs-border: light-dark(var(--color-luna), #3a3a3a);
  --tabs-tab-text: light-dark(var(--card-paragraph), #b0b0b0);
  --tabs-tab-hover: light-dark(var(--card-paragraph), #d0d0d0);
  --tabs-tab-active: light-dark(var(--color-neptune), #8ab4ff);

  /* Code block - AAA compliant contrast in both themes */
  --code-block-background: light-dark(#fafafa, #1e1e1e);
  --code-block-header-bg: light-dark(var(--color-cloud), #252525);
  --code-block-text: light-dark(#333333, #e8e8e8);
  --code-block-border: light-dark(#e0e0e0, #3a3a3a);
  --code-block-icon: light-dark(#666666, #c0c0c0);
  --code-block-tab-text: light-dark(#666666, #b0b0b0);
  --code-block-tab-active: light-dark(#333333, #ffffff);
  --code-block-tab-hover: light-dark(#444444, #d0d0d0);
  --code-block-footer-text: light-dark(#767676, #909090);
  --code-block-focus: light-dark(#0041a8, #6892E8);

  /* Syntax highlighting - AAA compliant in both themes */
  --syntax-comment: light-dark(#6a737d, #a0a8b0);
  --syntax-punctuation: light-dark(#444444, #d0d0d0);
  --syntax-tag: light-dark(#b31d28, #f5a0a0);
  --syntax-number: light-dark(#6f42c1, #c8a8e8);
  --syntax-string: light-dark(#22863a, #b5d89a);
  --syntax-operator: light-dark(#333333, #e8e8e8);
  --syntax-function: light-dark(#b08800, #e8d8a0);
  --syntax-keyword: light-dark(#0550ae, #9ed8eb);
  --syntax-regex: light-dark(#c45500, #f0c080);

  /* Border colors */
  --border-subtle: light-dark(var(--color-stratus), #444);
  --border-medium: light-dark(var(--color-alto), #555);

  /* Inline code */
  --inline-code-bg: light-dark(var(--color-stratus), #3a3a3a);
  --inline-code-border: light-dark(var(--color-alto), #555);

  /* Notice snippets */
  --notice-info-bg: light-dark(var(--color-luna), var(--background));
  --notice-info-border: light-dark(var(--color-comet), #6892e8);

  --notice-important-bg: light-dark(
    var(--color-amber-10),
    var(--background)
  );
  --notice-important-border: light-dark(var(--color-amber), #ff8c42);

  --notice-pricing-bg: light-dark(
    var(--color-sol-light),
    var(--background)
  );
  --notice-pricing-border: light-dark(var(--color-sol), #f7e064);

  --notice-permissions-bg: light-dark(
    var(--color-amethyst-10),
    var(--background)
  );
  --notice-permissions-border: light-dark(var(--color-amethyst), #e99aef);

  /* Faux search (home page) */
  --faux-search-border: light-dark(var(--color-stratus), #444);
  --faux-search-hover: light-dark(var(--color-nimbus), #888);

  /* Status indicator (footer) */
  --status-logo-bg: light-dark(var(--color-cloud), #333);
  --status-operational-bg: light-dark(
    var(--color-emerald-10),
    rgba(56, 164, 19, 0.15)
  );
  --status-maintenance-bg: light-dark(
    var(--color-luna),
    rgba(139, 180, 237, 0.15)
  );
  --status-minor-bg: light-dark(
    var(--color-sol-light),
    rgba(247, 224, 100, 0.15)
  );
  --status-major-bg: light-dark(
    var(--color-amber-10),
    rgba(252, 109, 38, 0.15)
  );
  --status-critical-bg: light-dark(
    var(--color-ruby-10),
    rgba(240, 58, 71, 0.15)
  );
}

// Disable transitions on page load to prevent flash when dark mode is applied
html.page-loading,
html.page-loading * {
  transition: none !important;
}

// Respect reduced motion preferences for movement-based animations
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    // Remove transform-based animations but keep color/opacity transitions
    transition-property:
      background-color,
      border-color,
      color,
      fill,
      stroke,
      opacity !important;
    transition-duration: 0.2s !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}
