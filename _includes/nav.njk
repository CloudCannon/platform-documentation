<nav class="l-header"
    @resize.window="
		if(window.innerWidth > 1023){
			isMainNavOpen = false;
		}
	">
    <div class="l-header__site">
        <a href="/documentation" class="l-header__emblem" aria-label="Go to cloudcannon.com">
            <img :src="darkMode == 'dark' ? '/assets/img/cc-docs-logo--dark.svg' : '/assets/img/cc-docs-logo.svg'" class="l-header__logo" alt="Go to cloudcannon.com" inline x-cloak>
        </a>
    </div>

    <div class="l-header__middle">
        {% include "nav-links.njk" %}
    </div>
    <div class="l-header__right">
        <button x-on:click="isModalOpen = true; $focusSearch(true);" class="l-header__search" title="Search">
            <img src="{{ "search:outlined" | icon("material") }}" inline>
        </button>
        <input type="checkbox" id="light_dark" @click="darkMode = darkMode == 'dark' ? 'light' : 'dark'; localStorage.setItem('cc_darkMode',darkMode)" :checked="darkMode == 'dark'" />
        <label for="light_dark" class="l-header__search light-darkmode" title="Light/Dark mode">
            <div class="light-darkmode__button dark">
                <img src="{{ "dark_mode:filled" | icon("material") }}" inline>
            </div>
            <div class="light-darkmode__button light">
                <img src="{{ "light_mode:filled" | icon("material") }}" inline>
            </div>
        </label>
        <a class="cc-helper__button" href="https://app.cloudcannon.com/register">Go to App</a>
    </div>
    <div class="l-header__mobile-controls">
        <button x-on:click="isModalOpen = true; $focusSearch(true);" class="l-header__search" title="Search">
            <img src="{{ "search:outlined" | icon("material") }}" inline>
        </button>
        <button x-on:click="isMainNavOpen = !isMainNavOpen; $focusNav(isMainNavOpen);" class="l-header__search menu" title="Menu">
            <img src="{{ "menu:outlined" | icon("material") }}" inline>
        </button>
    </div>
    <div class="l-header__mobile-menu" x-show="isMainNavOpen" x-trap='isMainNavOpen'>
        <div class="button-container" x-data="{ show_message: true }">
            <a class="cc-helper__button" href="https://app.cloudcannon.com/register">Go to App</a>
            <input type="checkbox" id="light_dark" @click="darkMode = darkMode == 'dark' ? 'light' : 'dark'; localStorage.setItem('cc_darkMode',darkMode)" :checked="darkMode == 'dark'" />
            <label for="light_dark" class="l-header__search light-darkmode" title="Light/Dark mode">
                <div class="light-darkmode__button dark">
                    <img src="{{ "dark_mode:filled" | icon("material") }}" inline>
                </div>
                <div class="light-darkmode__button light">
                    <img src="{{ "light_mode:filled" | icon("material") }}" inline>
                </div>
            </label>
        </div>
        {% include "nav-links.njk" %}
    </div>
</nav>