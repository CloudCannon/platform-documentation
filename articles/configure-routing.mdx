---
_schema: default
_uuid: 9c25997c-8237-4f48-a474-037304cd3982
_created_at: '2021-09-15 23:13:40 +0000'
title: Configure custom routing
nav_title: Configure custom routing
published: true
image: >-
  https://cc-dam.imgix.net/documentation/images/default-thumbnail/2023-Q4/CloudCannon-Documentation-Thumbnail.png
description: Configure your CloudCannon's hosting by configuring a single json file.
article_category:
  - Instructions
article_topic:
  - Hosting
  - Routing
tags:
  - Hosting
  - Sites
  - Redirects
  - Custom Headers
  - Guides
related_articles: []
related_links:
  - name: RE2
    url: https://github.com/uhop/node-re2
---
<comp.Notice info_type="important">
  Custom Routing is only available for Sites [hosted through CloudCannon](/documentation/articles/what-is-web-hosting/#hosting-on-cloud-cannon). If you host your Site externally, or use CloudCannon in [Headless Mode](/documentation/articles/what-is-headless-mode/), Custom Routing will not work.
</comp.Notice>

Custom routing allows you to control which content is delivered to your visitors when they enter a URL in their internet browser. You can create custom routing by creating a `routing.json` file in your `.cloudcannon` folder. When a visitor requests your webpage, the file server will also load the `routing.json` file

For a complete list of options available in the `routing.json` file, please read our [routing reference](/documentation/articles/routing-reference/) documentation.

## 301 Redirects

CloudCannon recommends creating 301 redirects to prevent visitors seeing x when they attempt to load any of your old URLs.

* **301 redirect** — a permanent redirect instruction

Permanently redirecting your old page URLs to ... SEO

<comp.Notice info_type="info">
  Invalid JSON code in the routing.json file will cause your Site [builds](/documentation/articles/what-is-a-site-build/) to fail, protecting the live version of your Site. You can troubleshoot your JSON using the [build output logs](/documentation/articles/what-is-a-site-build/#reading-your-build-output-logs).
</comp.Notice>

To create a custom routing file:

1. Navigate to the `.cloudcannon` folder using the *File browser*, or create one in the root of your Site.
2. Click the *\+ Add* button in the top right of the browser and select the *\+ Create new file* option from the dropdown.
3. Save

If you would prefer, you can can configure a `routing.json` file in your `.cloudcannon` folder using your local development environment.

Here's an example...

&nbsp;

## Custom Headers

&nbsp;

Configure your CloudCannon's hosting by configuring a single JSON file. Create a `routing.json` file in the `.cloudcannon` folder at the root of your file structure. When URLs are loaded through the file server, this file is loaded to extend the default behaviour. Add [custom headers](#custom-headers) and [configure redirects](#redirects) all in one place.

<comp.Notice info_type="info">
  Producing invalid JSON in this file will break the build and prevent hosting being impacted. Error messages will be available in the build output.
</comp.Notice>

### Routes

Routes are useful in two cases:

1. **Redirects**: When you change your website’s structure, you should redirect the old URLs to the new pages. This ensures external links pointing to the old content and search engines can be redirected.
2. **Push state routing**: Certain SSGs output a single html file that is expected to load on multiple routes. JavaScript on that page will load different content based on the url.

Configure your `routing.json` to include an array under the `routes` key with the following keys:


<comp.CodeBlock language="json" source=".cloudcannon/routing.json">
```

{
  "routes": [
    {
      "from": "/documentation/(.*)",
      "to": "/docs/$1",
      "status": 308
    },
    {
      "from": "/cloudcannon/(.*)",
      "status": 302,
      "to": "https://cloudcannon.com/$1"
    },
    {
      "from": "/app/(.*)",
      "status": 200,
      "to": "/app/"
    }
  ]
}

```
</comp.CodeBlock>

Redirects will only occur if the `from` url doesn't resolve to a file. Rules are read in order and the earliest matching rule is used.

<comp.Notice info_type="info">
  You can redirect to, but not from a URL fragment (e.g. \#example-heading). The fragment is not passed to the server so, it cannot be processed by the redirect.
</comp.Notice>

### Custom Headers

Configure extra headers on any route. Meet security needs or change some behaviour. Configure your `routing.json` to include an array under the `headers` key with the following keys:




<comp.CodeBlock language="json" source=".cloudcannon/routing.json">
```

{
  "headers": [
    {
      "match": "/about/",
      "headers": [
        {
          "name": "Access-Control-Allow-Origin",
          "value": "example.com"
        }
      ]
    }
  ]
}

```
</comp.CodeBlock>

Headers are processed at the beginning of all calls. Rules are read in order and combined on all matching rules similar to how CSS works.

### Generated redirects

Create dynamic redirects from pages and data of your site.

During your build process, generate a file on `_cloudcannon/routing.json` and this will be used instead of `.cloudcannon/routing.json` from your source.