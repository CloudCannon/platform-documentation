---
_schema: default
_uuid: 3536db99-3aa9-4978-bada-6bc16aaf8e87
_created_at: '2021-09-24 00:53:28 +0000'
title: Connect a Publish Branch
nav_title: Connect a Publish Branch
published: true
image: /documentation/static/CloudCannonDocumentationog.jpg
description: >-
  Learn how to set up a publish branch in CloudCannon, using immediate merging
  or pull requests.
tags:
  - branch
  - git
  - publish
related_articles:
  - merging-and-pull-requests
  - create-a-project
related_links:
---
The CloudCannon publishing workflow lets your team edit your content on a branch site. Team members can merge their changes into the Publish Branch directly or with a pull request.

Connecting a Publish Branch allows you to create a staging site to test changes without affecting your live site.

* **Publish Branch** — This is the site to which you publish your changes. This could be your live site.
* **Branch Site** — This is the site on which you make or test your changes. This could be your staging site.

<comp.Notice info_type="info">
  CloudCannon enables publishing workflows for branched sites inside a <a rel="noopener noreferrer" target="_blank" href="https://cloudcannon.com/documentation/articles/create-a-project/">Project</a> by default.
</comp.Notice>

## Connect a Publish Branch

You must have two or more branches in your repository and two or more sites on CloudCannon to enable publishing.

Let’s connect the branched site to your Publish Branch.

1. Navigate to the *Publishing* tab under *Site Settings*.
2. Search for the name of the branch connected to your Publish Branch and click *Add Publish Branch*.

<comp.DocsImage path="https://cc-dam.imgix.net/documentation/images/merges-and-pull-requests/2023-Q4/CloudCannon-Documentation-Connect-Publishing-Branch.png" alt="A screenshot of the CloudCannon app shows the Publishing tab on the Site Settings page, with a button to Add Publish Branch." title="" type="screenshot"/>

Your team can now publish changes to your Publish Branch via the *Publish* button in the sidebar of the branch site.

## Change your publish mode

CloudCannon offers two publishing modes: merge immediately or via pull request.

Merge immediately means that your team members can publish changes from a branch site to the Publish Branch without approval. This mode is great for small teams or when you want less overhead.

Pull request mode requires approval from another team member before changes can be merged with your Publish Branch. You can also configure Pull Requests to trigger external builds and workflows.

To change your publish mode:

1. Navigate to the *Publishing* tab under *Site Settings*.
2. Select *Merge changes immediately* or *Create a Pull Request for approval*.
3. Click *Update Publish Settings*.

<comp.DocsImage path="https://cc-dam.imgix.net/documentation/images/merges-and-pull-requests/2023-Q4/CloudCannon-Documentation-Publishing-Branch-Settings.png" alt="A screenshot of the CloudCannon app shows the Publishing tab on the Site Settings page, with the option to select Merge or Pull Request." title="" type="screenshot"/>

## Update from Publish Branch

<comp.DocsImage path="https://cc-dam.imgix.net/documentation/images/change-log/2023-Q4/CloudCannon-Documentation-Update-Publish-Branch-Diagram.svg" alt="A diagram of the new CloudCannon UI, with update notification icons on the Publish button and a callout to update this site." title="Update from Publish Branch Diagram" type="ui-snippet"/>

CloudCannon will detect when you or a team member have changed your Publish Branch. When updates are available, a red notification icon will appear on the *Publish* button in your *Site navigation*.

You can update your site to match the changes made to your Publish Branch to see how your pending changes and updates from other branches work together. We recommend updating your site, particularly if you have long-lived branches or are working on the same files across different branches.

To update your site:

1. Click on the *Publish* button in the *Site navigation*.
2. On the *Publishing* page, click the *Update this site* button.

CloudCannon will pull available updates from your Publish Branch.

### Upstream commit message templates

Updating from a Publish Branch will merge upstream changes with a merge commit or pull request. You can configure a commit message for these merges in your [global configuration file](/documentation/articles/setting-global-configuration/). Configuring a commit message will help you to maintain a consistent format.

Upstream commit messages use [template strings](/documentation/articles/configuring-with-placeholders/). To add an upstream commit template, add the key upstream\_commit\_template to the root level of your global configuration file.

Your `upstream_commit_template` should look something like this:

<comp.CodeBlock language="yaml" source="/cloudcannon.config.yaml">
```
upstream_commit_template: "Merge branch [publish_branch] into develop of [branch] by [author] at [date]"
```
</comp.CodeBlock>

An upstream commit message template can contain plain text and placeholders. Placeholders insert data related to the commit and use `[ ]` brackets. CloudCannon supports the following commit placeholders:

* `[branch]` — the name of the current branch.
* `[publish_branch]` — the name of the Publish Branch from which you merge upstream changes.
* `[author]` — the email address of the person responsible for the upstream merge.
* `[date]` — the date of the upstream merge in the format "Tue Nov 28 2023 21:46:17 GMT+0000".

## Delete after publishing

You can choose to delete your branch site after a successful merge. Deleting branch sites is useful if your team creates branch sites for defined changes that require no further development after merging.

CloudCannon automatically enables this setting for branched sites inside a <a target="_blank" rel="noopener noreferrer" href="https://cloudcannon.com/documentation/articles/create-a-project/">Project</a>.

To change your delete setting:

1. Navigate to the *Publishing* tab under *Site Settings*.
2. Check or uncheck the box labeled *Delete this site after publishing*.
3. Click *Update Publish Settings*.