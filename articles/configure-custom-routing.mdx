---
_schema: default
_uuid: 9c25997c-8237-4f48-a474-037304cd3982
_created_at: '2021-09-15 23:13:40 +0000'
title: Configure custom routing
nav_title: Configure custom routing
published: true
image: >-
  https://cc-dam.imgix.net/documentation/images/default-thumbnail/2023-Q4/CloudCannon-Documentation-Thumbnail.png
description: Configure your CloudCannon's hosting by configuring a single json file.
article_category:
  - Instructions
article_topic:
  - Hosting
  - Routing
tags:
  - Hosting
  - Sites
  - Redirects
  - Custom Headers
  - Guides
related_articles: []
related_links:
  - name: RE2
    url: https://github.com/uhop/node-re2
---
<comp.Notice info_type="important">
  Custom routing is only available for Sites [hosted through CloudCannon](/documentation/articles/what-is-web-hosting/#hosting-on-cloud-cannon). If you host your Site externally, or use CloudCannon in [Headless Mode](/documentation/articles/what-is-headless-mode/), custom routing will not work.
</comp.Notice>

Custom routing allows you to control which content is delivered to your visitors when they enter a URL in their internet browser. You can create custom routing by creating a `routing.json` file in your `.cloudcannon` folder. When a visitor requests your webpage, the file server will also load the `routing.json` file to extend the default routing behavior.

Your custom routing file can specify [redirects](/documentation/articles/configure-custom-routing/#custom-redirects) and [headers](/documentation/articles/configure-custom-routing/#custom-headers).

* **Custom redirect** — a permanent redirect instruction
* **Custom header** — a permanent redirect instruction

To create a blank custom routing file:

1. Navigate to the `.cloudcannon` folder using the *File browser*, or create one in the root of your Site.
2. Click the *\+ Add* button in the top right of the browser and select the *\+ Create new file* option from the dropdown. CloudCannon will open a blank `.txt` file in the Source Editor.
3. Click the *Save* button in the top right of the editing interface. CLoudCannon will open the *Review changes* modal.
4. Edit the file path to "/.cloudcannon/routing.json" and click the *Save selected* button in the bottom right of the modal.

CloudCannon will save a blank `routing.json` file in your `.cloudcannon` folder.

If you would prefer, you can also create a `routing.json` file using your local development environment.

<comp.Notice info_type="info">
  Invalid JSON code in the routing.json file will cause your Site [builds](/documentation/articles/what-is-a-site-build/) to fail, protecting the live version of your Site. You can troubleshoot your JSON using the [build output logs](/documentation/articles/what-is-a-site-build/#reading-your-build-output-logs).
</comp.Notice>

&nbsp;

&nbsp;

&nbsp;

For a complete list of options available in the `routing.json` file, please read our [routing reference](/documentation/articles/routing-reference/) documentation.

## Custom Redirects

Custom redirects control what content is delivered to a visitor when they attempt to visit a URL

Redirects have three parts: the `from` URL, the `to` URL, and the `status` code.

* **From** — a
* **To** — a
* **Status** — a

&nbsp;

CloudCannon recommends creating 301 redirects to prevent visitors seeing x when they attempt to load any of your old URLs.

* 200 — a
* **301** — a permanent redirect instruction
* **302** — a
* **307** — a
* **308** — a
* **404** — a
* **410** — a

A custom redirect will only occur if the `from` URL does not resolve when a visitor attempts to load the page. CloudCannon reads your redirects in order, and will use the earliest matching rule for a given `from` URL. Duplicate rules are ignored.

<comp.Notice info_type="info">
  You can redirect to, but not from a URL fragment (e.g. example.com/blog/#heading). The URL fragment is not passed to the server so, it cannot be processed by the redirect.
</comp.Notice>

Permanently redirecting your old page URLs to ... SEO

&nbsp;

To add custom redirects to your `routing.json` file:

1. Navigate to the `.cloudcannon` folder in your *File browser* and click on the `routing.json` file. CloudCannon will open `routing.json` in the Source Editor.
2. &nbsp;

Here's an example...

<comp.CodeBlock language="json" source=".cloudcannon/routing.json">
```

{
  "routes": [
    {
      "from": "/documentation/(.*)",
      "to": "/docs/$1",
      "status": 308
    },
    {
      "from": "/cloudcannon/(.*)",
      "to": "https://cloudcannon.com/$1",
      "status": 302
    },
    {
      "from": "/app/(.*)",
      "to": "/app/",
      "status": 200,
    }
  ]
}

```
</comp.CodeBlock>

&nbsp;

## Custom Headers

&nbsp;

&nbsp;

&nbsp;

### Routes

Routes are useful in two cases:

1. **Redirects**: When you change your website’s structure, you should redirect the old URLs to the new pages. This ensures external links pointing to the old content and search engines can be redirected.
2. **Push state routing**: Certain SSGs output a single html file that is expected to load on multiple routes. JavaScript on that page will load different content based on the url.

Configure your `routing.json` to include an array under the `routes` key with the following keys:

&nbsp;

### Custom Headers

Configure extra headers on any route. Meet security needs or change some behaviour. Configure your `routing.json` to include an array under the `headers` key with the following keys:

<comp.CodeBlock language="json" source=".cloudcannon/routing.json">
```

{
  "headers": [
    {
      "match": "/about/",
      "headers": [
        {
          "name": "Access-Control-Allow-Origin",
          "value": "example.com"
        }
      ]
    }
  ]
}

```
</comp.CodeBlock>

Headers are processed at the beginning of all calls. Rules are read in order and combined on all matching rules similar to how CSS works.

### Generated redirects

Create dynamic redirects from pages and data of your site.

During your build process, generate a file on `_cloudcannon/routing.json` and this will be used instead of `.cloudcannon/routing.json` from your source.