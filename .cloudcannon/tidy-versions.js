const fs = require("fs");

const filepath = "_data/systemversions.json";
const versions = {
  _comment:
    "Do not edit this file, it is autogenerated each build and committed back to the repo.",
  ...JSON.parse(fs.readFileSync(filepath, { encoding: "utf8" })),
};

(function cleanHugoVersion() {
  versions.go.hugo.list = versions.go.hugo.list.map((v) =>
    v.replace(/^v/, "").replace(/\-[^\+]+\+extended/, "")
  );
  versions.go.hugo.default = versions.go.hugo.list[0];
})();

fs.writeFileSync(filepath, JSON.stringify(versions, null, "\t"));
